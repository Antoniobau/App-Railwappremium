(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9724],{7208:(e,l,s)=>{"use strict";s.d(l,{n:()=>c});var r=s(66800),t=s.n(r),a=s(42559),i=s(19004),n=s(68914),o=s(22816);let c=()=>{var e,l,s,r;let{graphqlClient:c}=(0,i.q)(),{workspace:d}=(0,o.hA)(),u=null==d?void 0:d.customerId,{result:m,queryKey:x}=(0,a.W)(["referral-info",null==d?void 0:d.id,u],async()=>{if(null==d||null==u)throw Error("Workspace or customer ID is null");return await c.referralInfo({workspaceId:d.id,customerId:u})},{enabled:null!=d&&null!=u,staleTime:t()("5m")}),h=(0,n.n)(x,async e=>{d&&await c.referralInfoUpdate({input:{...e.input,workspaceId:d.id}})});return{isReferralInfoLoading:m.isLoading,referralInfo:null!=(s=null==(e=m.data)?void 0:e.referralInfo)?s:null,totalReferralPayouts:null!=(r=null==(l=m.data)?void 0:l.referralPayoutsTotal)?r:0,referralInfoActions:{referralInfoUpdate:h}}}},32654:(e,l,s)=>{"use strict";s.d(l,{B1:()=>b,DE:()=>y,Xl:()=>w,b1:()=>f});var r=s(50979),t=s(50253),a=s.n(t),i=s(96430),n=s(73143),o=s(92279),c=s(88020),d=s(22933),u=s(3258),m=s(98502),x=s(41285),h=s(51030),g=s(41481),p=s(62558),j=s(72227),v=s(92717);let f=e=>{var l;let{project:s,external:t,className:f,...y}=e,{routes:w}=(0,o.c)(),b=(0,i.md)((0,d.CI)(s)),N=(null==s?void 0:s.services)!=null,k=(null!=(l=null==s?void 0:s.services)?l:[]).length,I=w.project({projectId:s.id,environmentId:b}),L=(0,n.E)(null==s?void 0:s.dashboardDomain);return(0,r.jsxs)("div",{className:(0,u.xW)(null==s.deletedAt?"bg-secondaryBg dark:bg-gray-100 hover:bg-gray-100 dark:hover:bg-gray-200":"bg-danger-surface","h-projectItem p-6 rounded-lg relative",f),...y,children:[(0,r.jsx)(h.N,{...I,external:t,name:"Project Card",trackingProperties:{projectId:s.id},className:"absolute inset-0",children:(0,r.jsx)("span",{className:"sr-only",children:"View Project"})}),(0,r.jsxs)("div",{className:"project project-".concat(s.name," flex flex-col gap-2 h-full pointer-events-none relative z-10"),children:[(0,r.jsxs)(p.T,{className:"flex-grow",children:[(0,r.jsx)("p",{className:"font-medium mb-3",children:s.name}),(null==s?void 0:s.description)!=null&&(null==s?void 0:s.description.trim())!==""&&(0,r.jsx)(j.xC,{className:"line-clamp-2",children:null==s?void 0:s.description})]}),null!=s.deletedAt&&a()(new Date).isBefore(s.deletedAt)?(0,r.jsxs)(p.z,{className:"flex space-x-2 items-center my-1 text-danger",children:[(0,r.jsx)(x.In,{icon:c.c2w,size:"sm"}),(0,r.jsxs)("p",{className:"text-sm",children:["Removed"," ",(0,r.jsx)(v.s,{timeStyle:"short",children:s.deletedAt})]})]}):null,N?0===k?(0,r.jsx)(j.xC,{children:"empty project"}):k>1?(0,r.jsxs)(j.xC,{children:[k," ",(0,m.td)("service",k)]}):(null==s?void 0:s.dashboardDomain)!=null?(0,r.jsxs)(p.z,{align:"center",space:2,className:"text-gray-600",children:[(0,r.jsx)(x.In,{icon:c.N_E,size:"xs"}),(0,r.jsx)("div",{className:"block text-sm truncate overflow-hidden overflow-ellipsis pointer-events-auto",children:L?null==s?void 0:s.dashboardDomain:(0,r.jsx)(h.N,{href:"https://".concat(null==s?void 0:s.dashboardDomain),variant:"highlight",name:"Project Card Static URL",children:null==s?void 0:s.dashboardDomain})})]}):(0,r.jsx)(j.xC,{children:"1 service"}):(0,r.jsx)(g.g,{width:"60%",height:"21px",backgroundColor:"var(--gray-100)",foregroundColor:"var(--gray-200)"})]})]})},y=()=>(0,r.jsx)(g.g,{width:"100%",height:"100%",className:"h-full min-h-[180px]"}),w=e=>{var l;let{project:s,external:t,className:f,...y}=e,w=(0,i.md)((0,d.CI)(s)),{routes:b}=(0,o.c)(),N=(null==s?void 0:s.services)!=null,k=(null!=(l=null==s?void 0:s.services)?l:[]).length,I=b.project({projectId:s.id,environmentId:w}),L=(0,n.E)(null==s?void 0:s.dashboardDomain);return(0,r.jsxs)("div",{className:(0,u.xW)("p-4 rounded-lg relative overflow-hidden max-w-full",null==s.deletedAt?"bg-secondaryBg dark:bg-gray-100 hover:bg-gray-100 dark:hover:bg-gray-200":"bg-danger-surface",f),...y,children:[(0,r.jsx)(h.N,{...I,external:t,name:"Project Card",trackingProperties:{projectId:s.id},className:"absolute inset-0",children:(0,r.jsx)("span",{className:"sr-only",children:"View Project"})}),(0,r.jsxs)("div",{className:"project project-".concat(s.name," flex flex-col md:flex-row gap-2 md:items-center justify-between pointer-events-none relative z-10"),children:[(0,r.jsxs)("div",{className:"grid gap-0.5",children:[(0,r.jsx)("p",{className:"font-medium overflow-hidden overflow-ellipsis",children:s.name}),(null==s?void 0:s.description)!=null&&(null==s?void 0:s.description.trim())!==""&&(0,r.jsx)(j.xC,{className:"line-clamp-2 overflow-hidden overflow-ellipsis max-w-xl",children:null==s?void 0:s.description})]}),(0,r.jsxs)(p.z,{className:"flex items-center gap-4",children:[null!=s.deletedAt&&a()(new Date).isBefore(s.deletedAt)?(0,r.jsxs)(p.z,{className:"flex space-x-2 items-center my-1 text-danger",children:[(0,r.jsx)(x.In,{icon:c.c2w,size:"sm"}),(0,r.jsx)("p",{className:"text-sm",children:(0,r.jsx)(v.s,{timeStyle:"short",children:s.deletedAt})})]}):null,N?0===k?(0,r.jsx)(j.xC,{children:"empty project"}):(null==s?void 0:s.dashboardDomain)!=null?(0,r.jsxs)(p.z,{align:"center",space:2,className:"text-gray-600",children:[(0,r.jsx)(x.In,{icon:c.N_E,size:"xs"}),(0,r.jsx)("div",{className:"block text-sm truncate overflow-hidden overflow-ellipsis pointer-events-auto",children:L?null==s?void 0:s.dashboardDomain:(0,r.jsx)(h.N,{href:"https://".concat(null==s?void 0:s.dashboardDomain),variant:"highlight",name:"Project Card Static URL",children:null==s?void 0:s.dashboardDomain})})]}):k>=1?(0,r.jsxs)(j.xC,{children:[k," ",(0,m.td)("service",k)]}):null:(0,r.jsx)(g.g,{width:"60%",height:"21px",backgroundColor:"var(--gray-100)",foregroundColor:"var(--gray-200)"})]})]})]})},b=()=>(0,r.jsx)(g.g,{width:"100%",height:"58px",className:"h-full"})},36565:(e,l,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(38896)}])},38896:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>eg});var r=s(50979),t=s(25963),a=s(96430),i=s(26489),n=s(42559),o=s(19004),c=s(46943),d=s(22816),u=s(92949),m=s(62558),x=s(66654),h=s(17247),g=s(32654),p=s(32215),j=s(92279),v=s(69788),f=s(50253),y=s.n(f),w=s(98502),b=s(81300),N=s(15610),k=s(72227);let I=e=>{let{resetDate:l}=e,s=(0,t.useMemo)(()=>{let e=y()(l),s=y()();return e.diff(s,"days")},[l]),{routes:a}=(0,j.c)();return(0,r.jsx)(b.l,{variant:"danger",hideIcon:!0,children:(0,r.jsxs)(m.z,{align:"center",justify:"between",className:"w-full",children:[(0,r.jsxs)(m.z,{align:"center",space:2,children:[(0,r.jsx)(k.ax,{className:"font-medium",children:"Out of Credits"}),(0,r.jsx)("span",{className:"opacity-50",children:"|"}),(0,r.jsxs)(k.ax,{children:["You have run out of credits. Your balance will reset"," ",(0,r.jsx)("span",{className:"font-medium",children:s<1?"today":"in ".concat(s," ").concat((0,w.td)("day",s))}),"."]})]}),(0,r.jsx)(N.vx,{...a.workspacePlan({}),variant:"ghost",color:"red",size:"sm",children:"Upgrade"})]})})},L=()=>{let{workspaceCustomer:e}=(0,d.hA)();return null!=e&&e.hasExhaustedFreePlan?(0,r.jsx)(I,{resetDate:e.billingPeriod.end}):null};var C=s(30595);let P=[],A=()=>{let{proPlanBanners:e}=(()=>{let[e,l]=(0,C.A)("@railway/proPlanBanners",{defaultValue:{}});return{proPlanBanners:e,setBannerAsSeen:e=>{l(l=>({...l,[e]:!0}))}}})(),l=(0,t.useMemo)(()=>P.find(l=>{let{key:s}=l;return null==e[s]}),[e]);return null==l?null:l.banner({})};var D=s(4766),S=s(37608),z=s(76832),U=s(7208),T=s(88020),_=s(43057),R=s(10709),E=s(20780),M=s(41481),W=s(9159);let F=(0,S.Iz)(e=>(0,S.tG)("@railway/referral-banner-dismissed-".concat(e,"/2"),!1,void 0,{getOnInit:!0})),B=()=>{var e,l;let{referralInfo:s,isReferralInfoLoading:i}=(0,U.n)(),{routes:n,navActions:o}=(0,j.c)(),{modalActions:c}=(0,_.U)(),[{user:d}]=(0,R.Jd)(),[u,x]=(0,z.T)(),[h,g]=(0,a.fp)(F((null==d?void 0:d.id)||"anonymous")),p=(0,a.md)(E.yX),v=(0,t.useMemo)(()=>window.location.origin+"?referralCode=".concat(null==s?void 0:s.code),[null==s?void 0:s.code]);if(h)return null;if(i)return(0,r.jsx)(M.g,{width:"100%",height:"58px"});if(!s||p)return null;let f=((null==s||null==(e=s.referralStats)?void 0:e.pending)||0)+((null==s||null==(l=s.referralStats)?void 0:l.credited)||0),y=f>0;return(0,r.jsx)(b.l,{variant:"primary",hideIcon:!0,children:(0,r.jsxs)("div",{className:"grid items-center gap-x-4 gap-y-2 grid-cols-[1fr_auto] lg:grid-cols-[auto_auto_1fr_auto] w-full",children:[(0,r.jsxs)(m.z,{align:"center",space:2,children:[(0,r.jsx)(T.pD,{className:"text-pink-600"}),(0,r.jsx)(k.ax,{className:"font-semibold",children:"Refer Users & Earn Cash"})]}),(0,r.jsx)("span",{className:"opacity-50 hidden lg:block",children:"|"}),(0,r.jsxs)("div",{className:"grid gap-1 row-start-2 col-span-2 lg:row-start-1 lg:col-span-1 lg:col-start-3",children:[(0,r.jsxs)(k.ax,{children:["Get paid ",D.REFERRER_CASH_PERCENTAGE,"% commission on all Railway revenue from your referrals"]}),y&&(0,r.jsxs)(k.ax,{className:"text-pink-600",children:["You're earning cash from ",f," ",(0,w.td)("user",f)," so far!"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.$n,{variant:"ghost",size:"sm",iconRight:u?T.Jlk:T.QRo,className:"py-1 px-3 rounded-lg",iconStyles:"w-4 h-4",onClick:()=>{x(v),c.createToast((0,r.jsx)(W.y8,{variant:"success",title:"Referral link copied!"}))},children:(0,r.jsx)(k.ax,{className:"font-mono text-sm truncate max-w-[200px]",children:null==s?void 0:s.code})}),(0,r.jsx)(N.$n,{variant:"ghost",color:"pink",size:"sm",onClick:()=>{o.push(n.workspaceReferrals({}))},className:"hidden sm:flex",children:"Read More"}),(0,r.jsx)(N.K0,{iconStyles:"text-pink-600 !h-4 !w-4",title:"Dismiss referral banner",variant:"ghost",color:"pink",icon:T.X,onClick:()=>{g(!0)}})]})]})})};var V=s(83408),O=s(3258),G=s(51030);let Y=e=>{let{title:l,text:s,cta:t,link:a,isLimitedTrial:i}=e;return(0,r.jsxs)("div",{className:"w-full flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{className:(0,O.xW)("flex flex-col xs:flex-row xs:items-center gap-y-2 justify-between sm:justify-start","gap-x-2"),children:[(0,r.jsxs)(m.z,{space:2,children:[(0,r.jsx)(k.ax,{className:"font-semibold",children:l}),(0,r.jsx)(k.ax,{className:"opacity-50",children:"|"})]}),i?(0,r.jsxs)(m.T,{children:[(0,r.jsx)(k.ax,{className:"font-semibold",children:"Limited Trial"}),(0,r.jsx)(k.ax,{children:s})]}):(0,r.jsx)(k.ax,{children:s})]}),(0,r.jsx)(m.z,{align:"center",space:4,children:(0,r.jsx)(G.N,{href:a,className:"text-sm font-semibold",children:t})})]})},q=e=>{let{user:l,githubInfo:s}=e,{routes:t}=(0,j.c)(),{credits:a,isLoading:i}=(0,V.VA)({user:l});if(i)return null;let n="$".concat(a.remaining.toFixed(2)),o=a.daysRemaining+" "+(0,w.td)("day",a.daysRemaining);return(0,r.jsx)(b.l,{variant:null==s||!l.isVerified||a.maxedOut||a.expired?"warning":"success",hideIcon:!0,children:a.maxedOut||a.expired?(0,r.jsx)(Y,{title:"Trial Ended",text:"Thanks for trying Railway! Upgrade now to continue using the platform.",cta:"Upgrade now",link:t.workspacePlan({}).url}):(0,r.jsx)(r.Fragment,{children:null==s?(0,r.jsx)(Y,{title:o+" or "+n,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Unlock Full Trial",link:t.workspacePlan({}).url,isLimitedTrial:!0}):(0,r.jsx)(r.Fragment,{children:l.isVerified?(0,r.jsx)(Y,{title:o+" or "+n,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Choose a Plan",link:t.workspacePlan({}).url}):(0,r.jsx)(Y,{title:o+" or "+n,text:"Your trial expires in ".concat(o," or when you're out of credits. Upgrade to keep your services online."),cta:"Upgrade now",link:t.workspacePlan({}).url,isLimitedTrial:!0})})})})},$=()=>{let[{user:e,githubInfo:l}]=(0,R.Jd)();return null==e?null:(0,r.jsx)(q,{user:e,githubInfo:l})};var X=s(41285);let J=e=>{let{variant:l,text:s,cta:t,onClickCta:a}=e;return(0,r.jsx)(b.l,{variant:l,className:"my-8",hideIcon:!0,children:(0,r.jsxs)("div",{className:"w-full flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-8 items-center lg:justify-between",children:[(0,r.jsxs)(m.z,{align:"center",space:2,children:[(0,r.jsx)(X.In,{icon:T.RIJ}),(0,r.jsx)(k.ax,{className:"font-medium",children:s})]}),(0,r.jsx)(m.z,{align:"center",className:"min-w-max",children:(0,r.jsx)(N.$n,{size:"sm",onClick:a,children:t})})]})})},H=e=>{let{state:l,link:s}=e,{navActions:t}=(0,j.c)();return(0,r.jsx)(J,{variant:l===p.zZZ.Unpaid?"danger":"warning",text:"Your subscription is ".concat((0,w.Px)(l).toLowerCase(),". Please pay the outstanding balance to avoid service disruption and continue using Railway."),cta:"Go to billing",onClickCta:()=>t.push(s)})},K=e=>{let{currentUsage:l}=e,{workspace:s,isPro:a,isHobby:i,isFree:n,workspaceRole:o}=(0,d.hA)(),{dashboard:u}=(0,c.MZ)(),{routes:m}=(0,j.c)(),x=(0,t.useMemo)(()=>null==s?void 0:s.customerState,[s,u]),h="UNPAID"===x||"PAST_DUE"===x,g=o===p.KPK.Admin&&(a||i)&&!h;return(0,r.jsxs)(r.Fragment,{children:[!a&&!i&&!n&&(0,r.jsx)($,{}),h&&(0,r.jsx)(H,{state:x,link:m.workspaceBilling({workspaceId:null==s?void 0:s.id})}),a&&(0,r.jsx)(A,{}),n&&(0,r.jsx)(L,{}),null!=l&&(0,r.jsx)(v.T,{currentUsageTotal:l,onlyShowIfOverLimit:!0}),g&&(0,r.jsx)(B,{})]})};var Z=s(7397),Q=s(42968),ee=s(63198);let el=(0,O.xW)("flex items-center justify-center text-gray-400 bg-transparent p-2 w-xs h-xs rounded-sm","hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500","data-[state=on]:bg-gray-100 data-[state=on]:text-gray-500"),es=e=>{let{numProjects:l,numDeletedProjects:s,isLoading:t}=e,{config:a,setConfig:i}=(0,c.gQ)(),{track:n}=(0,Q.j)();return t||l+s===0?(0,r.jsx)("div",{className:"w-full h-[34px]"}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex items-center border-r-2 border-gray-200 pr-4 mr-4 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>{i(e=>({...e,showDeletedProjects:!1}))},className:(0,O.xW)("text-sm text-gray-600",s>0&&!a.showDeletedProjects?"font-bold":"hover:opacity-60"),children:[l," ",(0,w.td)("Project",l)]}),s>0&&(0,r.jsxs)("button",{onClick:()=>{i(e=>({...e,showDeletedProjects:!0}))},className:(0,O.xW)("text-sm text-gray-600",a.showDeletedProjects?"font-bold":"hover:opacity-60"),children:[s," Removed"]})]}),(0,r.jsxs)("div",{className:"group flex items-center gap-2 rounded-md px-2 -ml-2 hover:bg-gray-50 focus:outline-none",children:[(0,r.jsx)(X.In,{icon:T.hDL,className:"text-gray-500 group-hover:text-gray-500",size:"sm"}),(0,r.jsx)(ee.l,{label:{text:"Project sort",hidden:!0},size:"sm",variant:"outline",value:a.projectSort,options:[{text:"Recent Activity",value:"updatedAt"},{text:"Creation Date",value:"createdAt"},{text:"Alphabetical",value:"alphabetical"}],selectStyles:"rounded-none border-none pl-0 pr-8 text-sm text-gray-600 hover:bg-transparent group-hover:text-gray-800",iconStyles:"text-gray-400 group-hover:text-gray-600",onChange:e=>{e&&(i(l=>({...l,projectSort:e})),n({action:"Change",object:"Project Sort",properties:{value:e}}))}})]})]}),(0,r.jsxs)(Z.bL,{type:"single",value:a.projectViewType,"aria-label":"Project view display",className:"flex items-center border border-gray-100 rounded",onValueChange:e=>{e&&(i(l=>({...l,projectViewType:e})),n({action:"Change",object:"Project Display",properties:{value:e}}))},children:[(0,r.jsx)(Z.q7,{value:"list",className:el,children:(0,r.jsx)(X.In,{icon:T.B8B,size:"sm"})}),(0,r.jsx)(Z.q7,{value:"grid",className:el,children:(0,r.jsx)(X.In,{icon:T.xA9,size:"sm"})})]})]})};var er=s(67856),et=s(80498),ea=s(37514),ei=s(84397),en=s(60960);let eo=()=>{let{routes:e}=(0,j.c)(),{workspace:l,isHobby:s,isPro:a}=(0,d.hA)(),{members:i}=(0,d.sp)(null==l?void 0:l.id),{members:n,total:o}=(0,t.useMemo)(()=>{if(null==i.data)return{members:null,total:0};if(i.data.length<=5)return{members:i.data,total:i.data.length};let e=i.data.length;return{members:i.data.sort(()=>Math.random()-.5).slice(0,5),total:e}},[i.data]),c=(0,et.De)({workspaceId:null==l?void 0:l.id}),{showModal:u}=(0,er.h)();return(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center justify-between",children:[(0,r.jsx)(en.E,{triggerClassName:"-ml-2 sm:-ml-3"}),(0,r.jsxs)("div",{className:"flex gap-4 items-center mt-2 sm:mt-0",children:[(0,r.jsx)(G.N,{...e.workspacePeople({workspaceId:null==l?void 0:l.id}),children:null!=n&&(0,r.jsxs)("div",{className:"flex -space-x-2",children:[n.map(e=>(0,r.jsx)(ei.eu,{email:e.email,avatar:e.avatar,overrideSize:"28px",className:"border-transparent border-2 rounded-sm"},e.id)),o>5&&(0,r.jsx)(m.T,{align:"center",justify:"center",className:"w-7 h-7 rounded-full overflow-hidden text-sm bg-gray-100 border-background border-2 flex items-center justify-center",children:(0,r.jsx)(X.In,{icon:T.a4,size:"xs",className:"text-gray-500"})})]})}),(0,r.jsxs)("div",{className:"flex gap-2 flex-grow justify-end",children:[(0,r.jsx)(N.sh,{color:"gray",size:"sm",variant:"outline",icon:T.wB_,className:"",...e.workspace({})}),(null==l?void 0:l.id)!=null&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.vx,{variant:"outline",size:"sm",icon:T.pD,className:"hidden md:flex",...e.workspaceReferrals({}),children:"Refer"}),(0,r.jsx)(N.vx,{variant:"outline",size:"sm",icon:T.ypN,className:"",...e.workspacePeople({workspaceId:null==l?void 0:l.id}),children:"Invite"})]}),s||a||c.allowed?(0,r.jsx)(N.vx,{variant:"primary",size:"sm",icon:T.FWt,...e.newProject({workspaceId:null==l?void 0:l.id}),children:"New"}):(0,r.jsx)(N.$n,{variant:"primary",size:"sm",icon:T.FWt,onClick:()=>u(ea.p,{title:"Upgrade to create a new project",description:"Free plan resource creation has been exceeded."}),children:"New"})]})]})]})})};var ec=s(38843),ed=s(71208);let eu=e=>{let{workspaceId:l}=e,[{user:s}]=(0,R.Jd)(),{routes:t}=(0,j.c)(),a=(0,ec.a)(),{colorMode:i}=(0,ed.DP)(),n=a?"/illustrations/dashboard-empty-state-".concat("dark"===i?"dark":"light",".svg"):null,o=a?"/illustrations/dashboard-empty-state-circles-".concat("dark"===i?"dark":"light",".svg"):null;return null==s?null:(0,r.jsxs)(G.N,{...t.newProject({workspaceId:l}),className:(0,O.xW)("group","relative flex flex-col md:flex-row items-center justify-center flex-grow border border-dashed border-gray-200 rounded-lg py-36 h-[444px]","hover:border-pink-500"),children:[null!=n&&null!=o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{alt:"",src:n,style:{width:136,height:136},className:"bg-background z-1 h-max"}),(0,r.jsx)("img",{alt:"",src:o,className:"absolute left-0 top-0 bottom-0 hidden lg:block"})]}):(0,r.jsx)("div",{style:{width:136,height:136}}),(0,r.jsxs)(m.T,{className:"max-w-[380px] mt-8 md:mt-0 md:ml-8 text-center md:text-left",children:[(0,r.jsx)(k.mM,{className:"mb-2 text-gray-600 font-medium",children:"Create a New Project"}),(0,r.jsx)(k.ax,{className:"mb-5 text-gray-400",children:"Deploy a GitHub Repository, Provision a Database, or create an Empty Project to start from local."})]})]})},em=e=>{let{projects:l,workspaceId:s,isLoading:a,projectCount:i}=e,{config:n,setConfig:o}=(0,c.gQ)(),d=(0,c.tc)(l,n.projectSort);return(d=(0,c.kz)(d,n.showDeletedProjects),(0,t.useLayoutEffect)(()=>{0===d.length&&n.showDeletedProjects&&o(e=>({...e,showDeletedProjects:!1}))},[d.length,n.showDeletedProjects]),a||0!==d.length||n.showDeletedProjects)?"list"===n.projectViewType?a?(0,r.jsx)("div",{className:"grid gap-1",children:Array.from({length:i}).map((e,l)=>(0,r.jsx)(g.B1,{},l))}):(0,r.jsx)("div",{className:"grid gap-1",children:d.map(e=>(0,r.jsx)(g.Xl,{project:e,className:"h-full"},e.id))}):a?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:i}).map((e,l)=>(0,r.jsx)(g.DE,{},l))}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,r.jsx)(g.b1,{project:e,className:"h-full"},e.id))}):(0,r.jsx)(eu,{workspaceId:null!=s?s:void 0})},ex=()=>{var e;let{projectsByWorkspace:l,dashboard:s}=(0,c.MZ)(),{workspace:g,isLoading:p}=(0,d.hA)(),{result:j}=(e=>{let{graphqlClient:l}=(0,o.q)(),s=(0,a.md)((0,i.q8)(e));return(0,n.W)(["workspace","currentUsage",e],async()=>{if(null==e)throw Error("Workspace ID is required");return(await l.workspaceCurrentUsage({workspaceId:e})).workspace.customer.currentUsage},{enabled:null!=e&&!s})})(null==g?void 0:g.id),v=(0,t.useMemo)(()=>{var e;return(null!=(e=null==g?void 0:g.projects)?e:[]).filter(e=>null==e.deletedAt).length},[g]),f=(0,t.useMemo)(()=>{var e;return g&&null!=(e=l[g.id])?e:[]},[l,null==g?void 0:g.id]);return(0,r.jsxs)(x.YS,{children:[(0,r.jsx)(h.F,{hideTrialBanner:!0}),!p&&(0,r.jsx)(m.T,{className:"px-5 md:px-8 w-full pt-12",children:(0,r.jsxs)("main",{className:"grid gap-12 max-w-container mx-auto w-full pb-24",children:[(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsx)(eo,{}),(0,r.jsx)(K,{currentUsage:j.data})]}),(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsx)(u.c,{className:"my-0"}),(0,r.jsx)(es,{isLoading:s.isLoading,numProjects:f.filter(e=>null==e.deletedAt).length,numDeletedProjects:f.filter(e=>null!=e.deletedAt).length}),(0,r.jsx)(em,{projects:f,workspaceId:null!=(e=null==g?void 0:g.id)?e:void 0,isLoading:s.isLoading,projectCount:v})]})]})})]})},eh=()=>{let[{user:e}]=(0,R.Jd)();return null==e?null:(0,r.jsx)(ex,{})};eh.requireAuthentication=!0;let eg=eh},69788:(e,l,s)=>{"use strict";s.d(l,{T:()=>b});var r=s(50979),t=s(25963),a=s(22816),i=s(88020),n=s(43057),o=s(93937),c=s(3258),d=s(15610),u=s(62558),m=s(72227),x=s(4766),h=s(6772),g=s(19004),p=s(68914),j=s(79899),v=s(54682),f=s(49021),y=s(9159);let w=e=>{var l,s;let{customerId:a,usageLimit:o,onUpdate:c}=e,{modalActions:w}=(0,n.U)(),{usageLimitActions:b}=(e=>{let{customerId:l}=e,{graphqlClient:s}=(0,g.q)(),r=["workspace"];return{usageLimitActions:{setUsageLimit:(0,p.n)(r,async e=>(await s.usageLimitSet(e),!0)),removeUsageLimit:(0,p.n)(r,async e=>(await s.usageLimitRemove(e),!0))}}})({customerId:a}),[N,k]=(0,t.useState)(null!=(l=null==o?void 0:o.hardLimit)?l:null),[I,L]=(0,t.useState)(null!=(s=null==o?void 0:o.softLimit)?s:null),[C,P]=(0,t.useState)(!1),[A,D]=(0,h.b)(),S=async()=>{if(null!=I){P(!0);try{await b.setUsageLimit({input:{customerId:a,hardLimitDollars:N,softLimitDollars:I}}),c(),w.createToast((0,r.jsx)(y.y8,{variant:"success",title:"Success",description:"Your usage limit was updated!"})),w.exitModal()}catch(e){D(e.message)}P(!1)}},z=async()=>{P(!0);try{await b.removeUsageLimit({input:{customerId:a}}),c(),w.createToast((0,r.jsx)(y.y8,{variant:"success",title:"Success",description:"Your usage limit was removed!"})),w.exitModal()}catch(e){D(e.message)}P(!1)};return(0,r.jsx)(f.aF,{title:"Usage Limits",children:(0,r.jsxs)(j.lV,{className:"space-y-8",onSubmit:S,children:[(0,r.jsx)(f.wt,{children:"Usage limits"}),(0,r.jsxs)(u.T,{space:3,children:[(0,r.jsx)(m.ax,{className:"font-semibold",children:"Hard limit"}),(0,r.jsx)(m.xC,{children:"When your usage reaches this amount, we will shut down ALL your resources to prevent further charges."}),(0,r.jsx)(v.pd,{type:"number",label:{text:"Hard limit",hidden:!0},placeholder:"150",min:x.MIN_HARD_USAGE_LIMIT_DOLLARS,max:x.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=N?N:void 0,onChange:e=>k(Number(e.target.value)),icon:i.G9t})]}),(0,r.jsxs)(u.T,{space:3,children:[(0,r.jsx)(m.ax,{className:"font-semibold",children:"Custom email alert"}),(0,r.jsx)(m.xC,{children:"You will receive an email notification when this limit is hit."}),(0,r.jsx)(v.pd,{type:"number",label:{text:"Soft limit",hidden:!0},placeholder:"25",min:x.MIN_SOFT_USAGE_LIMIT_DOLLARS,max:x.MAX_USAGE_LIMIT_DOLLARS,defaultValue:null!=I?I:void 0,onChange:e=>L(Number(e.target.value)),icon:i.G9t,required:!0})]}),null!=A&&(0,r.jsx)(m.yn,{children:A}),(0,r.jsxs)(u.z,{align:"center",justify:null==o?"end":"between",children:[null!=o&&(0,r.jsx)(d.$n,{variant:"ghost",color:"red",type:"button",className:"font-medium",onClick:z,children:"Remove limits"}),(0,r.jsxs)(u.z,{align:"center",space:4,children:[(0,r.jsx)(d.$n,{type:"button",variant:"outline",color:"gray",onClick:()=>w.exitModal(),children:"Cancel"}),(0,r.jsx)(d.$n,{type:"submit",disabled:null==I||C,children:"Save limit"})]})]})]})})},b=e=>{let{currentUsageTotal:l,onlyShowIfOverLimit:s=!1}=e,{workspaceCustomer:x}=(0,a.hA)(),{invalidateWorkspace:h}=(0,o.iS)(),{modalActions:g}=(0,n.U)(),{isNearingLimit:p,isOverLimit:j,percentageUsed:v}=(0,t.useMemo)(()=>{let e=!1,s=!1;if((null==x?void 0:x.usageLimit)==null||(null==x?void 0:x.usageLimit.hardLimit)==null)return{isNearingLimit:e,isOverLimit:s,percentageUsed:0};let r=null==x?void 0:x.usageLimit.hardLimit;return r&&l<r&&l>=.75*r&&(e=!0),r&&l>=r&&(s=!0),{isNearingLimit:e,isOverLimit:s,percentageUsed:r?l/r*100:0}},[null==x?void 0:x.usageLimit,l]),f=()=>{x&&g.openModal((0,r.jsx)(w,{customerId:x.id,usageLimit:x.usageLimit,onUpdate:h}))};return(null==x?void 0:x.usageLimit)==null||(null==x?void 0:x.usageLimit.hardLimit)==null?s?null:(0,r.jsxs)(d.$n,{variant:"outline",color:"gray",onClick:f,children:[(null==x?void 0:x.usageLimit)==null?"Set":"Update"," usage limits"]}):!s||p||j?(0,r.jsxs)(u.T,{space:2,children:[(0,r.jsxs)(u.z,{justify:"between",align:"center",children:[(0,r.jsxs)(u.z,{space:1,align:"center",children:[(0,r.jsx)(m.ax,{className:"font-semibold",children:"Limit"}),(0,r.jsx)(d.K0,{title:"Edit usage limit",iconStyles:"text-gray-500",size:"xs",icon:i.Pt,onClick:f})]}),(0,r.jsxs)(m.tj,{className:"text-gray-500",children:[l.toFixed(2)," / ",null==x?void 0:x.usageLimit.hardLimit," USD"]})]}),(0,r.jsx)("div",{className:(0,c.xW)("h-2 w-full bg-gray-100 rounded-lg"),children:(0,r.jsx)("div",{className:(0,c.xW)("h-full rounded-lg",p||j?"bg-red-500":"bg-pink-500"),style:{width:"".concat(v>100?100:v,"%")}})}),p&&(0,r.jsx)(m.tj,{className:"text-red-500",children:"Nearing usage limit. Update limit to keep your services running."}),j&&(0,r.jsxs)(m.tj,{className:"text-red-500",children:[(0,r.jsx)("strong",{children:"All deployments are paused."})," Update limit to resume your services or wait until the next billing cycle."]})]}):null}},73143:(e,l,s)=>{"use strict";s.d(l,{E:()=>t});var r=s(25963);let t=e=>(0,r.useMemo)(()=>null!=e&&e.startsWith("*."),[e])}},e=>{e.O(0,[636,6593,8792],()=>e(e.s=36565)),_N_E=e.O()}]);